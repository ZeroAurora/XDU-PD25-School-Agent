# Copilot Instructions for XDU-PD25-School-Agent

## Business Context
AI-powered campus activity planning assistant helping students manage school life through intelligent recommendations.

**Core Problem**: Students face information overload from campus activities and need intelligent filtering based on personal interests, major, and schedule.

**Solution Architecture**:
- **Natural Language Interface**: Chat-based interaction for activity queries and planning
- **RAG-based Retrieval**: Intelligent search across structured/unstructured data sources (course schedules, events, announcements)
- **Activity Recommendations**: AI agent filters and recommends activities matching user profile and availability
- **Calendar Integration**: One-click add recommended activities to personal schedule
- **Modular Design**: Frontend UI + Agent Decision Core + Knowledge Base Retrieval + Cloud LLM API

**Key Domain Entities**: Student profile, campus activities, schedules/calendars, recommendations, chat interactions

**Display Language**: Simplified Chinese（简体中文）

## Project Overview
React 19 SPA for school agent system using TanStack Router (file-based), React Query, Ant Design X, and Tailwind CSS v4. Built with Vite and Bun runtime.

## Tech Stack & Key Dependencies
- **Runtime**: Bun (not npm/yarn) - use `bun` for all package management and scripts
- **Router**: TanStack Router with file-based routing - routes live in `src/routes/`, `routeTree.gen.ts` is auto-generated
- **State/Data**: TanStack React Query v5 + TanStack Store
- **UI**: Ant Design v5 base + `@ant-design/x` (AI-focused components for chat, prompts, bubble cards)
- **Styling**: Tailwind CSS v4 + Lucide React for icons
- **Tooling**: Biome (linting/formatting), Vite (bundler), TypeScript 5.7 with strict mode
- **React**: v19 with `@ant-design/v5-patch-for-react-19` compatibility patch

## Architecture Patterns

### AI/Agent Features (Ant Design X)
- Use `@ant-design/x` components for conversational UI: `<Conversations>`, `<Bubble>`, `<Prompts>`, `<Sender>`
- Agent decision logic should separate from UI - use React Query for API orchestration
- Activity recommendations rendered as cards/lists with action buttons

### Routing (TanStack File-Based)
- Routes are files in `src/routes/` - TanStack auto-generates route tree
- Root layout in `src/routes/__root.tsx` contains `<Outlet />` and unified devtools
- Use `createFileRoute()` API (not `createLazyFileRoute()`)
- Example route structure:
  ```tsx
  export const Route = createFileRoute("/")({
    component: ComponentName,
  });
  ```

### Styling
- Tailwind CSS v4 via `@tailwindcss/vite` plugin - import happens in `src/styles.css`
- Ant Design provides component library - **prefer Ant Design X for AI/chat interfaces**
- Use utility-first Tailwind classes for layout/spacing, Ant Design for interactive components
- Lucide React for custom icons when Ant Design icons insufficient
- Use spaces for indentation (Biome config)

## Development Workflow

### Commands (Always use `bun`)
```bash
bun install              # Install dependencies
bun run dev              # Dev server on port 3000
bun run build            # Production build (Vite + TSC)
bun run serve            # Preview production build
bun lint                 # Lint with Biome
bun lint --write         # Lint and auto-fix
bun format               # Format with Biome
bun check                # Combined lint + format check
```

### Biome Configuration
- Uses spaces for indentation, double quotes for JS/TS
- Ignores: `src/routeTree.gen.ts` (auto-generated), `src/styles.css` (Tailwind import only)
- Organize imports action enabled
- Lints: `src/**/*`, `.vscode/**/*`, root config files

### Import Aliases
- `@/*` maps to `src/*` (configured in both `tsconfig.json` and `vite.config.ts`)
- Example: `import { Component } from "@/components/Component"`

## Critical Conventions

1. **Never edit `src/routeTree.gen.ts`** - auto-generated by TanStack Router plugin
2. **Never edit `src/styles.css`** - only contains `@import "tailwindcss"`
3. **Use file-based routing** - add new `.tsx` files to `src/routes/` for new routes
4. **Bun-first** - all scripts use `bun`, not `npm` or `yarn`
5. **TypeScript strict** - `noUnusedLocals`, `noUnusedParameters`, `strict: true`
6. **React 19 compatibility** - always import Ant Design patch in main entry

## File Organization
```
src/
  main.tsx              # App entry, router + query setup
  routeTree.gen.ts      # Auto-generated, DO NOT EDIT
  styles.css            # Tailwind import only, DO NOT EDIT
  components/           # Shared components (currently empty)
  routes/               # File-based routes
    __root.tsx          # Root layout with unified devtools
    index.tsx           # Home route
```

## When Adding Features

### New Routes
1. Create `src/routes/{name}.tsx` file
2. Use `createFileRoute()` export pattern
3. TanStack auto-generates route tree on save
4. Use `<Link to="/path">` from `@tanstack/react-router` for navigation

### Chat/Agent Interfaces
- Use Ant Design X components: `<Conversations>` for chat history, `<Sender>` for input
- Structure messages with `<Bubble>` for user/assistant messages
- Implement `<Prompts>` for quick-action suggestions (e.g., "Find events this week")

## External Resources

Always use context7 when I need code generation, setup or configuration steps, or library/API documentation.

This means you should automatically use the Context7 MCP tools to resolve library id and get library docs without me having to explicitly ask.
